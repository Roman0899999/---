<!DOCTYPE html>
<html>
<head>
  <title>Административная панель</title>
  <link rel="stylesheet" href="style.css">
  <script src="script.js"></script>
</head>
<body>
  <?php
  // Подключиться к базе данных
  $mysqli = new mysqli("localhost", "root", "password", "instructions_db");

  // Проверить, вошел ли пользователь в систему
  session_start();
  if (!isset($_SESSION['username']) || $_SESSION['role'] != 'admin') {
    header("Location: login.php");
    exit;
  }

  // Обработать действия администратора
  if (isset($_GET['action'])) {
    $action = $_GET['action'];
    $id = $_GET['id'];

    switch ($action) {
      case 'approve':
        $mysqli->query("UPDATE instructions SET status='Одобрено' WHERE id=$id");
        break;
      case 'reject':
        $mysqli->query("UPDATE instructions SET status='Отклонено' WHERE id=$id");
        break;
      case 'delete':
        $mysqli->query("DELETE FROM instructions WHERE id=$id");
        break;
      case 'ban':
        $mysqli->query("UPDATE users SET status='Заблокирован' WHERE id=$id");
        break;
      case 'unban':
        $mysqli->query("UPDATE users SET status='Активный' WHERE id=$id");
        break;
    }

    // Перенаправить на страницу управления
    header("Location: manage.php");
    exit;
  }
  ?>

  <h1>Административная панель</h1>
  <ul>
    <li><a href="manage.php">Управление инструкциями</a></li>
    <li><a href="users.php">Управление пользователями</a></li>
    <li><a href="complaints.php">Журнал жалоб</a></li>
  </ul>
</body>
</html>